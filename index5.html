<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Circuito CHIP5 2026 - Oficial</title>
<style>
body{
font-family:Arial;
background:#0d0d0d;
color:#fff;
padding:20px;
}

h1{
text-align:center;
color:#FFD700;
}

button{
padding:8px 12px;
background:#FFD700;
border:none;
cursor:pointer;
font-weight:bold;
margin:5px;
}

input,select{
padding:5px;
margin:5px;
}

table{
width:100%;
border-collapse:collapse;
margin-top:20px;
background:#1b1b1b;
}

th,td{
padding:8px;
border:1px solid #333;
text-align:center;
}

th{
background:#FFD700;
color:#000;
}

.top1{background:#6b5e00;}
.top2{background:#444;}
.top3{background:#5a3d00;}

.admin{
background:#181818;
padding:15px;
margin-top:20px;
border:1px solid #333;
}
</style>
</head>
<body>

<h1>üèÜ Circuito CHIP5 2026</h1>

<button onclick="mostrarAdmin()">üîê Admin</button>
<button onclick="window.print()">üìÑ Exportar PDF</button>

<div id="admin" style="display:none" class="admin">
<input type="password" id="senha" placeholder="Senha">
<button onclick="login()">Entrar</button>

<div id="painel" style="display:none">

<h3>Cadastrar Atleta</h3>
<input id="nome" placeholder="Nome">
<select id="sexo">
<option>M</option>
<option>F</option>
</select>
<select id="distancia">
<option>5K</option>
<option>10K</option>
</select>
<select id="categoria">
<option>M30</option>
<option>M40</option>
<option>F30</option>
<option>F40</option>
</select>
<button onclick="cadastrar()">Cadastrar</button>

<h3>Lan√ßar Resultado</h3>
<input id="busca" placeholder="Nome atleta">
<input id="etapa" type="number" min="1" max="8" placeholder="Etapa">
<input id="posicao" type="number" placeholder="Posi√ß√£o">
<button onclick="pontuar()">Lan√ßar</button>

</div>
</div>

<h2>Ranking Geral (com descarte da pior etapa)</h2>
<table>
<thead>
<tr>
<th>Pos</th>
<th>Nome</th>
<th>Sexo</th>
<th>Dist</th>
<th>Categoria</th>
<th>Total Bruto</th>
<th>Total c/ Descarte</th>
</tr>
</thead>
<tbody id="ranking"></tbody>
</table>

<script>

let atletas = JSON.parse(localStorage.getItem("chip5")) || [];

function salvar(){
localStorage.setItem("chip5",JSON.stringify(atletas));
}

function mostrarAdmin(){
document.getElementById("admin").style.display="block";
}

function login(){
if(document.getElementById("senha").value==="chip52026"){
document.getElementById("painel").style.display="block";
}
}

function cadastrar(){
atletas.push({
nome:nome.value,
sexo:sexo.value,
distancia:distancia.value,
categoria:categoria.value,
pontos:[0,0,0,0,0,0,0,0]
});
salvar();
atualizar();
}

function calcularPontos(pos){
if(pos==1)return 100;
if(pos==2)return 80;
if(pos==3)return 70;
if(pos==4)return 60;
if(pos==5)return 50;
if(pos==6)return 45;
if(pos==7)return 40;
if(pos==8)return 35;
if(pos==9)return 30;
if(pos==10)return 25;
return 10;
}

function pontuar(){
let atleta = atletas.find(a=>a.nome===busca.value);
if(atleta){
let etapaIndex = etapa.value-1;
atleta.pontos[etapaIndex] = calcularPontos(posicao.value);
salvar();
atualizar();
}
}

function atualizar(){

let tabela = document.getElementById("ranking");
tabela.innerHTML="";

atletas.forEach(a=>{
a.totalBruto = a.pontos.reduce((s,p)=>s+p,0);
let menor = Math.min(...a.pontos);
a.totalDesc = a.totalBruto - menor;
});

atletas.sort((a,b)=>b.totalDesc-a.totalDesc);

atletas.forEach((a,i)=>{

let classe="";
if(i==0)classe="top1";
if(i==1)classe="top2";
if(i==2)classe="top3";

tabela.innerHTML+=`
<tr class="${classe}">
<td>${i+1}</td>
<td>${a.nome}</td>
<td>${a.sexo}</td>
<td>${a.distancia}</td>
<td>${a.categoria}</td>
<td>${a.totalBruto}</td>
<td><b>${a.totalDesc}</b></td>
</tr>
`;
});

}

atualizar();

</script>

</body>
</html>
